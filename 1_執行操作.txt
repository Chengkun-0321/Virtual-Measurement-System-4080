# 環境建版本
Package           Version
----------------- -------
asgiref           3.8.1
attrs             25.3.0
autobahn          24.4.2
Automat           25.4.16
bcrypt            4.3.0
cffi              1.17.1
channels          4.2.2         pip install channels    WebSocket終端機即時顯示
constantly        23.10.4
cryptography      44.0.2
daphne            4.1.2         pip install daphne
Django            5.2           pip install django
hyperlink         21.0.0
idna              3.10
incremental       24.7.2
paramiko          3.5.1         pip install paramiko    SSH遠端連線
pip               25.0
pyasn1            0.6.1
pyasn1_modules    0.4.2
pycparser         2.22
PyNaCl            1.5.0
pyOpenSSL         25.0.0
service-identity  24.2.0
setuptools        75.8.0
sqlparse          0.5.3
tomli             2.2.1
Twisted           24.11.0
txaio             23.1.1
typing_extensions 4.13.2
wheel             0.45.1
zope.interface    7.2
dotenv            1.2.1

pip install celery redis channels["daphne"]
---------------------------------------------

# 若出現錯誤 no such table: django_session
1. 請在你的 Django 專案目錄中執行以下指令
    python manage.py migrate
2. 如果是第一次執行資料庫初始化:
    python manage.py makemigrations
    python manage.py migrate
3. 重啟伺服器
    python manage.py runserver


# 本機執行
1. 進到live_demo資料夾裡
2. Daphne 啟動 python -m daphne mysite.asgi:application;  執行程式
3. 終端機輸入 python manage.py runserver
執行2.+ 3.指令結合：python -m daphne -p 8000 mysite.asgi:application
內部連線網址--> http://127.0.0.1:8000/


# 外網執行
啟動流程： RabbitMQ -> Redis -> Celery -> Django


# 虛擬環境
conda activate django


# RadditMQ 服務（Message Broker）
啟動服務：  sudo systemctl start rabbitmq-server
關閉服務：  sudo systemctl stop rabbitmq-server
重啟服務：  sudo systemctl restart rabbitmq-server
查看狀態：  sudo systemctl status rabbitmq-server
設定開機自動啟動：  sudo systemctl enable rabbitmq-server
取消開機自動啟動：  sudo systemctl disable rabbitmq-server

Web 管理介面開啟：  sudo rabbitmq-plugins enable rabbitmq_management
Web 管理介面停用：  sudo rabbitmq-plugins disable rabbitmq_management
-> http://localhost:15672 (預設帳號/密碼：guest / guest)


# redis 中繼站服務（存任務結果）
sudo systemctl start redis-server      # 啟動
sudo systemctl stop redis-server       # 停止
sudo systemctl restart redis-server    # 重啟
sudo systemctl status redis-server     # 查看狀態
sudo systemctl enable redis-server     # 開機自動啟動
redis-cli ping                         # 開啟確認（出現「PONG」代表成功）
redis-cli monitor                      # 內容顯示


# Celery Worker 啟動
conda activate django
celery -A mysite worker -l info -c 1
須設定只開一個 worker ， 印為預設(celery -A mysite worker -l info)是 4 個 worker


# 網頁伺服器執行
conda activate django
daphne -b 0.0.0.0 -p 8000 mysite.asgi:application
遠端連線網址--> http://140.137.41.136:7780/