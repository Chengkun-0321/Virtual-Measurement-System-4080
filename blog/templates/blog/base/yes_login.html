<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}預設標題{% endblock %}</title>

    <!-- 共用 Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- ✅ 預留子頁面的 CSS -->
    {% block styles %}{% endblock %}

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="d-flex flex-column min-vh-100" style="font-family: '標楷體';">
    {% include "blog/base/_navbar.html" %}

    <div class="container">
        {% block content %}{% endblock %}
    </div>

    <footer class="d-flex justify-content-center align-items-center mt-auto p-3 bg-light" style="height: 80px;">
        <p class="m-0 fs-5 text-center flex-grow-1">114年度資訊系統專題 A01 - 李璨宏 & 王正坤</p>
        <a href="#" class="btn btn-outline-secondary btn-sm ms-3" id="back-to-top">⬆️ 回到頂端</a>
    </footer>
    <script>
    document.getElementById("back-to-top").addEventListener("click", function(e){
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: "smooth" });
    });
    
    // 自動更新登出的 CSRF token
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    document.addEventListener("DOMContentLoaded", function() {
        const logoutForm = document.getElementById("logout-form");
        if (logoutForm) {
            let csrfInput = logoutForm.querySelector("input[name=csrfmiddlewaretoken]");
            if (csrfInput) {
                csrfInput.value = getCookie("csrftoken");
            }
        }
    });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>