<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>è³‡æ–™ä¸‹è¼‰é é¢</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100" style="font-family: 'æ¨™æ¥·é«”';">
    {% include "blog/_navbar.html" %}
    <div class="container">
        <br>
        <!-- é é¢æ¨™é¡Œ -->
        <h2 class="mb-4 text-center">â¬‡ï¸ è³‡æ–™ä¸‹è¼‰é é¢</h2>

        <!-- ä¼ºæœå™¨ é€£ç·šæç¤º -->
        <div id="ssh-status" class="text-center mb-3">
            <span class="text-warning fw-bold">ğŸŸ¡ ä¼ºæœå™¨é€£ç·šä¸­...</span>
        </div>

        <div class="mb-4 text-center">
            <label for="modelName" class="form-label fs-5">è«‹è¼¸å…¥æ¨¡å‹åç¨±ï¼ˆä¸å«å‰¯æª”å .h5ï¼‰</label>
            <input type="text" id="modelName" class="form-control text-center mx-auto" style="max-width: 400px;" placeholder="ä¾‹å¦‚ï¼šmymodel_01">
        </div>

        <!-- å„ç¨®æª”æ¡ˆä¸‹è¼‰æŒ‰éˆ• -->
        <div class="text-center">
            <button onclick="download('model')" class="btn btn-primary m-2">æ¨¡å‹æª”æ¡ˆ</button>
            <button onclick="download('confusion')" class="btn btn-outline-dark m-2">æ··æ·†çŸ©é™£åœ–</button>
            <button onclick="download('ground_truth')" class="btn btn-outline-secondary m-2">çœŸå¯¦ vs é æ¸¬åœ–</button>
            <button onclick="download('loss')" class="btn btn-outline-info m-2">Loss æ›²ç·š</button>
            <button onclick="download('mae')" class="btn btn-outline-info m-2">MAE æ›²ç·š</button>
            <button onclick="download('mape')" class="btn btn-outline-info m-2">MAPE æ›²ç·š</button>
            <button onclick="download('mse')" class="btn btn-outline-info m-2">MSE æ›²ç·š</button>
        </div>

        <!-- è¿”å›é¦–é æŒ‰éˆ• -->
        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary btn-lg">ğŸ”™ è¿”å›é¦–é </a>
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const sshStatus = document.getElementById('ssh-status');
            const socket = new WebSocket("ws://" + window.location.host + "/ws/CMD/");

            // WebSocket é€£ç·šæˆåŠŸ
            socket.onopen = function() {
                console.log("âœ… WebSocket å·²é€£ç·š");
                sshStatus.innerHTML = `<span class="text-success fw-bold">ğŸŸ¢ ä¼ºæœå™¨ å·²é€£ç·š</span>`;
            };
        });

        function download(type) {
            const modelName = document.getElementById("modelName").value.trim();
            if (!modelName) {
                alert("è«‹è¼¸å…¥æ¨¡å‹åç¨±ï¼");
                return;
            }
            const url = `/download/file/${type}/${modelName}/`;
            window.location.href = url;
        }
    </script>
</body>
</html>