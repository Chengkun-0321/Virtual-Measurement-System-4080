{% extends "blog/base/yes_login.html" %}
{% load static %}

{% block title %}éƒ¨ç½²æ¨¡å‹{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/model_deploy.css' %}?v=1">
{% endblock %}

{% block content %}
<div class="container">
    <br>
    <!-- é é¢æ¨™é¡Œ -->
    <h2 class="mb-4 text-center">ğŸ”° éƒ¨ç½²æ¨¡å‹</h2>

    <!-- ä¼ºæœå™¨ é€£ç·šæç¤º -->
    <div id="ssh-status" class="text-center mb-3">
        <span class="text-warning fw-bold">ğŸŸ¡ ä¼ºæœå™¨é€£ç·šä¸­...</span>
    </div>

    <!-- åˆä½µè¡¨å–®èˆ‡æ¨¡å‹é¸æ“‡ç‚ºä¸€æ’ -->
    <div class="d-flex justify-content-center align-items-end gap-4 flex-wrap mb-4">

        <!-- ä¸Šå‚³å€ -->
        <form id="upload-form" enctype="multipart/form-data" class="d-flex align-items-end gap-2 flex-wrap">
            <div>
                <label for="csv-file" class="form-label fw-bold">åŒ¯å…¥è£½ç¨‹åƒæ•¸:</label>
                <!--<input type="file" id="csv-file" name="file" accept=".csv" class="form-control">-->
                <input type="file" id="npy-file" name="file" accept=".npy" class="form-control">
            </div>
            <div>
                <button type="submit" class="btn btn-primary">ä¸Šå‚³ä¸¦é è¦½è³‡æ–™</button>
            </div>
            <div>
                <a href="{% url 'download_sample' %}" class="btn btn-outline-secondary">ä¸‹è¼‰æä¾›çš„è£½ç¨‹åƒæ•¸è³‡æ–™</a>
            </div>
        </form>

        <!-- æ¨¡å‹é¸æ“‡å€ -->
        <div class="d-flex align-items-end gap-2 flex-wrap">
            <div>
                <label for="model-select" class="form-label fw-bold">é¸æ“‡æ¨¡å‹ï¼š</label>
                <select id="model-select" class="form-select w-auto"></select>
            </div>
            <div>
                <button id="predict-btn" class="btn btn-success">åŸ·è¡Œé æ¸¬</button>
            </div>
        </div>

    </div>

    <div class="row mb-2">
        <div class="col-md-10 text-center">
            <h5>ä¸Šå‚³è³‡æ–™æª¢è¦–å€</h5>
        </div>
        <div class="col-md-2 text-center">
            <h5>é æ¸¬é¡¯ç¤ºå€</h5>
        </div>
    </div>

    <div class="scroll-wrapper d-flex">
        <!-- å·¦é‚Š -->
        <div id="data-table-container" class="table-responsive mb-4" style="max-height: 400px; overflow-y: auto; width: 83%;">
            <table id="data-table" class="table table-bordered table-sm">
                <thead class="table-light"></thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- å³é‚Š -->
        <div id="prediction-table-container" class="table-responsive mb-4" style="max-height: 400px; overflow-y: auto; width: 15%; margin-left: auto;">
            <table id="prediction-table" class="table table-bordered table-sm">
                <thead class="table-light">
                    <tr><th>#</th><th>é æ¸¬å€¼</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- é æ¸¬çµæœ -->
    <div id="prediction-result" class="alert alert-info d-none"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/model_deploy.js' %}"></script>
{% endblock %}