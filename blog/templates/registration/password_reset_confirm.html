{% extends "blog/base/no_login.html" %}
{% load static %}
{% block title %}重設密碼{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/login.css' %}?v=1">
{% endblock %}

{% block content %}
<div class="login-wrapper text-center">
    <div class="login-card">
        <h2>設定新密碼</h2>

        {% if validlink %}
        <form id="resetForm" method="post">
            {% csrf_token %}
            <input type="password" name="new_password1" placeholder="請輸入新密碼" required>
            <input type="password" name="new_password2" placeholder="請再次輸入新密碼" required>
            <button type="submit">確認重設密碼</button>
        </form>

        <!-- 訊息顯示 -->
        {% if messages %}
        <div class="mt-3">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} text-center">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% else %}
        <p>密碼重設連結已失效！</p>
        <a href="{% url 'password_reset' %}" class="btn btn-primary mt-3">重新申請</a>
        {% endif %}
    </div>
</div>
{% endblock %}
